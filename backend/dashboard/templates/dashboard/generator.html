{% extends 'base.html' %}

{% block content %}
<div class="workspace">
    <div class="panel">
        <div style="margin-bottom: 20px;">
            <span class="badge badge-blue">ุชุญููู ุงูุณูุงู</span>
            <h3 style="margin-top: 10px; line-height: 1.4;">{{ cluster.title|default:"ุงุฎุชุฑ ูุดููุฉ ูู ุงูููุญุฉ ุงูุฑุฆูุณูุฉ" }}</h3>
        </div>

        <div style="margin-bottom: 25px; background: #f8f9fe; padding: 15px; border-radius: 12px;">
            <h5 style="color: var(--text-secondary); margin-bottom: 10px;">ูุจุฑุฉ ุงููุณุชุฎุฏููู (Sentiment)</h5>
            <div style="display: flex; gap: 10px; align-items: center;">
                <span style="font-size: 24px;">๐</span>
                <div style="flex: 1; height: 8px; background: #eee; border-radius: 5px;">
                    <div style="width: 75%; height: 100%; background: #ff7675; border-radius: 5px;"></div>
                </div>
                <span style="font-size: 14px; font-weight: bold; color: #ff7675;">ุบุงุถุจ (75%)</span>
            </div>
        </div>

        <h5 style="color: var(--text-secondary); margin-bottom: 10px;">ุฃุจุฑุฒ ุงููููุงุช ุงููุชูุฑุฑุฉ</h5>
        <div style="display: flex; flex-wrap: wrap; gap: 8px; margin-bottom: 20px;">
            <span class="badge" style="background: #e3f2fd; color: #1976d2;">#ููุงุฐ_ุงููุทูู</span>
            <span class="badge" style="background: #e3f2fd; color: #1976d2;">#ุชุณุฌูู_ุฏุฎูู</span>
            <span class="badge" style="background: #ffebee; color: #c62828;">#ุฎุทุฃ_403</span>
            <span class="badge" style="background: #e3f2fd; color: #1976d2;">#ุชุทุจูู_ุฃุจุดุฑ</span>
        </div>
        
        <h5 style="color: var(--text-secondary); margin-bottom: 10px;">ุนููุงุช ูู ุงูุฑุณุงุฆู:</h5>
        <div style="overflow-y: auto; flex: 1; max-height: 300px;">
            <div class="chat-bubble">"ูุงุฎู ูู ุณุงุนุฉ ุฃุญุงูู ุงุณูู ูุณูุช ูููุฉ ุงููุฑูุฑ ููุง ููุตููู ููุฏ"</div>
            <div class="chat-bubble">"ุงููุธุงู ูุนูู ูุนุทููู ุฎุทุฃ ุบุฑูุจ ููุง ุฃุญุงูู ุฃุฏุฎู"</div>
        </div>
    </div>

    <div class="panel" style="border-color: var(--primary-color); position: relative; display: flex; flex-direction: column;">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <i class="fa-solid fa-wand-magic-sparkles" style="color: var(--primary-color); font-size: 20px;"></i>
                <h4>ุงูููุชุฑุญ ุงูุฐูู (Generative AI)</h4>
            </div>
            <button class="action-btn" onclick="simulateTyping()">
                <i class="fa-solid fa-rotate-right"></i> ุฅุนุงุฏุฉ ุชูููุฏ
            </button>
        </div>
        
        <textarea id="ai-response" spellcheck="false" 
            style="flex: 1; width: 100%; min-height: 350px; padding: 20px; border: 1px solid #ddd; border-radius: 12px; resize: none; font-size: 16px; line-height: 1.8; background-color: #fff; margin-bottom: 15px;"
            placeholder="ุฌุงุฑู ุชุญููู ุงููุดููุฉ ูุชูููุฏ ุงูุญู ุงูููุงุณุจ..."></textarea>
        
        <div style="margin-bottom: 20px; display: flex; align-items: center; gap: 10px; background: #f9f9f9; padding: 10px; border-radius: 8px; border: 1px dashed #ddd;">
            <span style="font-size: 13px; color: var(--text-secondary); font-weight: bold;">
                <i class="fa-solid fa-language" style="color: var(--primary-color);"></i> ุฌุงูุฒ ููุนุฑุถ ุจุงููุบุงุช:
            </span>
            <div style="display: flex; gap: 6px;">
                {% if cluster %}
                    {% for lang in cluster.supported_languages %}
                    <span title="{{ lang.name }}" style="font-size: 12px; background: #fff; border: 1px solid #ddd; padding: 4px 10px; border-radius: 20px; cursor: help; display: flex; align-items: center; gap: 5px;">
                        {{ lang.flag }} {{ lang.code }}
                    </span>
                    {% endfor %}
                {% else %}
                    <span style="font-size: 12px; background: #fff; border: 1px solid #ddd; padding: 4px 10px; border-radius: 20px;">๐ธ๐ฆ AR</span>
                    <span style="font-size: 12px; background: #fff; border: 1px solid #ddd; padding: 4px 10px; border-radius: 20px;">๐บ๐ธ EN</span>
                {% endif %}
            </div>
        </div>

        <div style="display: flex; justify-content: flex-end; gap: 10px;">
            <button class="action-btn" style="background: #fff; color: #333 !important; border: 1px solid #ddd;" onclick="alert('ุณูุชู ุชุฑุฌูุฉ ุงูุญู ุฅูู ุงูุฅูุฌููุฒูุฉ...')">
                <i class="fa-solid fa-globe"></i> ุชุฑุฌูุฉ ุงูุญู
            </button>

            <button class="action-btn" style="background: #eee; color: #333 !important;" onclick="alert('ุชู ุงููุณุฎ!')">ูุณุฎ ุงููุต</button>
            
            <button class="action-btn" onclick="alert('ุชู ุงุนุชูุงุฏ ุงูุญู ูุฅุถุงูุชู ููููุชุจุฉ!')">
                <i class="fa-solid fa-check"></i> ุงุนุชูุงุฏ ููุดุฑ
            </button>
        </div>
    </div>
</div>

<script>
    const solutionText = `ูุฑุญุจุงู ุจูุ
ูุนุชุฐุฑ ุนู ุงูุตุนูุจุฉ ุงูุชู ุชูุงุฌููุง ูู ุงูุฏุฎูู.
ุจูุงุกู ุนูู ุชุญููู ุงูุฎุทุฃ (403)ุ ูุฑุฌู ุงุชุจุงุน ุงูุฎุทูุงุช ุงูุชุงููุฉ ูุญู ุงููุดููุฉ:

1. ุชุฃูุฏ ูู ุฅููุงู ุฃู ุจุฑุงูุฌ VPN ููุฏ ุงูุชุดุบูู.
2. ุญุงูู ุงูุฏุฎูู ุจุงุณุชุฎุฏุงู ูุชุตูุญ ูุฎุชูู (ูุซู Chrome ุฃู Edge).
3. ุชุฃูุฏ ูู ุชุญุฏูุซ ุชุทุจูู "ููุงุฐ" ูุฃุฎุฑ ุฅุตุฏุงุฑ.

ุฅุฐุง ุงุณุชูุฑุช ุงููุดููุฉุ ูุฑุฌู ุชุฒููุฏูุง ุจุฑูู ุงููููุฉ ูุณูููู ุจุฑูุน ุชุฐูุฑุฉ ุชูููุฉ ููุฑุงู.`;

    const textarea = document.getElementById('ai-response');
    
    function simulateTyping() {
        textarea.value = "";
        textarea.setAttribute('placeholder', 'ุฌุงุฑู ูุชุงุจุฉ ุงูุญู...');
        let i = 0;
        const speed = 25; 

        function type() {
            if (i < solutionText.length) {
                textarea.value += solutionText.charAt(i);
                i++;
                setTimeout(type, speed);
            }
        }
        setTimeout(type, 500);
    }

    window.onload = simulateTyping;
</script>
{% endblock %}